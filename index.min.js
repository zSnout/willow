globalThis.__DEV__=!0;var p;function b(){return p}var E=class{constructor(e,n){this.effect=e;this.name=n;p?.c.add(this),this.run()}t=new Set;c=new Set;track(e){this.t.add(e)}cleanup(){this.t.forEach(e=>e.delete(this)),this.t.clear(),this.c.forEach(e=>e.cleanup()),this.c.clear()}run(){let e=p;p=this,this.effect(),p=e}};function y(t,e){let n=new Set;return[()=>{let o=p;return o&&(o.track(n),n.add(o)),t},o=>{typeof o=="function"?t=o(t):t=o,n.forEach(i=>i.run())}]}function a(t,e){return new E(t,e?.name)}function l(t){return typeof t=="function"}function W(t){return typeof t=="function"}function V(t){return Array.isArray(t)&&t.length===2&&l(t[0])&&W(t[1])}function k(t,e){let n=p;p=void 0;let r=t();return p=n,r}function le(t){let e=Object.create(null);return k(()=>{for(let n in t){let r=t[n];l(r)?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get(){return r()}}):V(r)?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get(){return r[0]()},set(s){return s[1](s)}}):Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get(){return t[n]}})}}),e}var K="addEventListener",T="lastChild",h="splice",v="nextElementSibling",A="nextSibling";var _=class extends Array{item(e){return this[e]}namedItem(e){return this.find(n=>n.nodeName==e)||null}},f=class extends Comment{after(...e){let n=this.n.at(-1);n?n.after(...e):super.after(...e),this.r()}appendChild(e){return this.n.push(e),this.r(),e}before(...e){let n=this.n.at(-1);n?n.before(...e):super.before(...e),this.r()}get children(){return this.n.filter(e=>e instanceof Element)}get childNodes(){return this.n}contains(e){return this==e||this.n.some(n=>n.contains(e))}get firstChild(){return this.n[0]||null}hasChildNodes(){return!!this.n.length}insertBefore(e,n){let r=this.n.indexOf(n);return r==-1||(this.n[h](r,0,e),this.r()),e}get[T](){return this.n.at(-1)||null}get[v](){return this[T]?this[T][v]:super[v]}get[A](){return this[T]?this[T][A]:super[A]}remove(){super.remove(),this.u()}removeChild(e){let n=this.n.indexOf(e);return n==-1||(this.n[h](n,1),this.r()),e}replaceChild(e,n){let r=this.n.indexOf(e);return r==-1||(this.n[h](r,1,n),this.r()),n}setTo(...e){this.u(),this.n[h](0,this.n.length,...e.filter(n=>n)),this.r()}replaceWith(...e){this.u(),super.replaceWith(...e),this.r()}n=new _;constructor(e="Fragment"){super(),this.data=` ${e} `,this[K]("DOMNodeInserted",n=>{n.target==this&&this.r()}),this[K]("DOMNodeRemoved",n=>{n.target==this&&this.u()})}r(){super.after(...this.n.filter(e=>e))}u(){this.n.forEach(e=>e?.remove())}};function Se(t,e){let[n,r]=y(0);return a(()=>r(t()),e?.name?{name:`memo '${e?.name}'`}:{}),n}function xe(t,e){let[n,r]=y(0);return a(()=>r(t=e(t))),n}function m(t){return l(t)?t():t}var H=new Set(["pop","push","reverse","shift","sort","splice","unshift","fill","copyWithin"]),B=new Set(["add","clear","delete"]),G=new Set(["clear","delete","set"]);function L(t,e){if(typeof t=="function"||t instanceof Node)return t;let n=new Set;return new Proxy(t,{get(r,s,o){let i=Reflect.get(r,s,o);if(typeof i=="function"&&(r instanceof Array&&H.has(s)||r instanceof Set&&B.has(s)||r instanceof Map&&G.has(s)))return function(){let u=i.apply(this,arguments);return n.forEach(x=>x.run()),u};let c=b();return c&&(c.track(n),n.add(c)),typeof i=="object"?L(i):i},set(...r){let s=Reflect.set(...r);return n.forEach(o=>o.run()),s}})}function M(t,e){let n=new Set;return[new Proxy(t,{get(s,o,i){let c=Reflect.get(s,o,i),u=b();return u&&(u.track(n),n.add(u)),typeof c=="object"&&c?L(c):c}}),()=>n.forEach(s=>s.run())]}function we({value:t,pending:e,then:n,catch:r}){let s=new f("Await"),o=0;return a(async()=>{let i=++o;s.setTo(e);try{let c=await m(t);if(o!==i)return;s.setTo(n?.(c))}catch(c){if(o!==i)return;s.setTo(r?.(c))}},{name:"<Await>"}),s}function Ve({children:t}){let e=new f("Dynamic");return a(()=>{e.setTo(t())},{name:"<Dynamic>"}),e}function O({children:t}){let e=new f("List");return a(()=>e.setTo(...m(t)),{name:"<List>"}),e}function D(t,e,n){let r=new Map,[s,o]=M([]);return a(()=>{let i=-1;for(let c of t){let u=r.get(c);if(i++,u)u[1]!==i&&(u[2](u[1]=i),s[i]=u[0]);else{let[x,R]=y(i),C=e(c,x);r.set(c,[C,i,R]),s[i]=C}}s.length=++i,o()},n),s}function We({children:t,each:e}){return O({children:D(e,t,{name:"<For>"})})}var I;(n=>{function t([r,s]){return o=>{let i=!1;a(()=>{i||(o.value=r())},{name:"bind:value"}),S(o,"input",()=>{i=!0,s(o.value),i=!1})}}n.value=t;function e([r,s]){return o=>{let i=!1;a(()=>{i||(o.value=""+r())},{name:"bind:numeric"}),S(o,"input",()=>{i=!0,s(+o.value),i=!1})}}n.numeric=e})(I||={});function $(t){return Array.isArray(t)}var q=new Set(["svg","animate","animateTransform","circle","clipPath","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","path","pattern","polygon","polyline","radialGradient","rect","stop","switch","symbol","text","textPath","tspan","use","view"]);function z(t){return q.has(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t)}function w(t,e){t.appendChild(e)}function S(t,e,n,r=!1){t.addEventListener(e,n,r)}function N(t){return document.createTextNode(""+t)}function P(t,e,n){t.setAttribute(e,""+n)}function Q(t){return t instanceof Node}function d(t,e,n){let r=a(e,n);(t.willowScopes||=new Set).add(r)}function X(t,e){if($(e))e.forEach(n=>X(t,n));else if(l(e)){let n=N("");d(n,()=>n.data=""+e(),{name:"reactive text"}),w(t,n)}else Q(e)?w(t,e):w(t,N(e))}function J(t){return typeof t=="string"?t:$(t)?t.map(J).join(" "):typeof t=="object"&&t?Object.entries(t).filter(([,e])=>e).map(([e])=>e).join(" "):""}function F(t,e){if(l(e))d(t,()=>F(t,e()),{name:"css style object"});else if(typeof e=="string")t.setAttribute("style",e);else if(typeof e=="object")for(let n in e){let r=e[n];l(r)?d(t,()=>t.style[n]=r(),{name:`css style.${n}`}):t.style[n]=r}}function U(t,e,...n){if(typeof t=="string"){let r=z(t);X(r,e?.children||n);for(let s in e){let o=e[s];if(r instanceof HTMLElement&&(s==="class"||s==="className"))l(o)?d(r,()=>r.className=J(o()),{name:"className"}):r.className=J(o);else if(s==="classList")for(let i in o)d(r,()=>r.classList.toggle(i,!!m(o[i])),{name:`classList.${i}`});else s==="use"?typeof o=="function"&&o(r):s==="style"?F(r,o):s.startsWith("bind:")?I[s.slice(5)](o)(r):s.startsWith("on:")?typeof o=="function"&&S(r,s.slice(3),o):s.startsWith("oncapture:")?typeof o=="function"&&S(r,s.slice(10),o,!0):s.includes("-")?l(o)?d(r,()=>P(r,s,o()),{name:`element attribute ${s}`}):P(r,s,o):l(o)?d(r,()=>r[s]=o(),{name:`element property ${s}`}):r[s]=o}return r}else if(typeof t=="function"){let r=n.length===1?n[0]:n;n.length?e?e.children||(e={...e,children:r}):e={children:r}:e||(e={});let s;try{s=t(e)}catch{s=new t(e)}return s instanceof g?s.node:s}throw new TypeError(`willow.h must be passed a tag name or function, but was passed a ${typeof t}`)}(e=>{function t({children:n}){let r=new f;return X(r,n),r}e.f=t})(U||={});var Y=Symbol("willow.propsSymbol"),g=class{static of(e){return class extends g{render(n){return e(this,n)}}}node;[Y];l={};constructor(e){e={...e};for(let n in e)n.startsWith("on:")&&(this.l[n.slice(3)]=e[n]);this.node=this.render(e)}cleanup(){j(this.node),this.node.remove(),this.node=N("")}emit(e,...n){this.l[e]?.(...n)}};function j(t){t.willowScopes?.forEach(e=>e.cleanup()),t.childNodes.forEach(j)}function st({when:t,fallback:e,children:n}){if(typeof t=="boolean")return t?n:e||document.createComment(" Maybe ");let r=new f("Maybe");return a(()=>{let s=t()?n:e;s?r.setTo(s):r.setTo()},{name:"<Maybe>"}),r}export{we as Await,Ve as Dynamic,We as For,O as List,st as Maybe,g as WillowElement,f as WillowFragment,j as cleanupNode,xe as createComputed,M as createManualStore,Se as createMemo,L as createStore,U as h,D as map,le as toStore,m as unref};
